<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>TONIKS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body { font-family: sans-serif; background: #1f1c2c; color: #fff; padding: 2em; }
    .container { max-width: 800px; margin: auto; background: rgba(255,255,255,0.1); padding: 1em; border-radius: 12px; }
    input, textarea { width: 100%; padding: 0.5em; margin-top: 0.5em; border-radius: 6px; border: none; }
    button { padding: 0.5em 1em; margin-top: 0.5em; background: #00c3ff; color: white; border: none; border-radius: 6px; cursor: pointer; }
    .entry { background: rgba(255,255,255,0.1); padding: 0.5em; margin-top: 0.5em; border-radius: 6px; }
    small { display: block; margin-top: 0.3em; color: #ccc; }
    h2 { border-bottom: 1px solid #444; padding-bottom: 0.3em; margin-top: 1.5em; }
    .hidden { display: none; }
  </style>
  <script>
    function checkAdmin() {
      const nick = document.getElementById("nickname").value.trim().toLowerCase();
      const passField = document.getElementById("adminPass");
      if (nick === "admin") {
        passField.classList.remove("hidden");
      } else {
        passField.classList.add("hidden");
      }
    }
  </script>
</head>
<body>
  <div class="container">
    <h1>TONIKS</h1>

    {% if not role %}
      <form method="POST">
        <label>–í–≤–∏–¥–∏—Ç–µ –Ω–∞–¥–ø–∏—Å—å "user" —ç—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ä–æ–±–æ—Ç–∞: 
          <input name="nickname" id="nickname" oninput="checkAdmin()" />
        </label>
        <div id="adminPass" class="hidden">
          <label>–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞: <input type="password" name="password" /></label>
        </div>
        <button type="submit">–í–æ–π—Ç–∏</button>
      </form>
    {% else %}
      <p>–í—ã –≤–æ—à–ª–∏ –∫–∞–∫ <strong>{{ role }}</strong></p>
      
      {% if role == "user" %}
        <h2>üí¨ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>
        <form method="POST">
          <input type="hidden" name="nickname" value="{{ role }}">
          <textarea name="comment" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..."></textarea>
          <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
        </form>

        <h2>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É</h2>
        <form method="POST">
          <input type="hidden" name="nickname" value="{{ role }}">
          <textarea name="setting" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞..."></textarea>
          <button type="submit">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</button>
        </form>

        <h2>üé• –í–∏–¥–µ–æ —Å –ê—Ä—Ç—É—Ä–∏–∫–æ–º</h2>
        <div style="text-align:center;">
          <iframe width="560" height="315" src="https://www.youtube.com/embed/dQw4w9WgXcQ"
            title="YouTube video" frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen></iframe>
        </div>

      {% elif role == "admin" %}
        <h2>üì• –í—Å–µ –∑–∞–∫–∞–∑—ã</h2>
        {% for o in orders %}
          <div class="entry">
            <strong>{{ o.nick }}</strong>: {{ o.text }}<br>
            <span>üìû {{ o.phone }}</span>
            <form method="POST" style="margin-top: 0.5em;">
              <input type="hidden" name="nickname" value="{{ role }}">
              <button name="delete" value="{{ loop.index0 }}">‚ùå –£–¥–∞–ª–∏—Ç—å –∑–∞–∫–∞–∑</button>
            </form>
          </div>
        {% endfor %}

        <h2>üö´ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–Ω–∞–º–∏</h2>
        <form method="POST">
          <input type="hidden" name="nickname" value="{{ role }}">
          <input name="ban" placeholder="–ù–∏–∫ –¥–ª—è –±–∞–Ω–∞" />
          <button type="submit">–ó–∞–±–∞–Ω–∏—Ç—å</button>
        </form>

        <form method="POST">
          <input type="hidden" name="nickname" value="{{ role }}">
          <input name="unban" placeholder="–ù–∏–∫ –¥–ª—è —Ä–∞–∑–±–∞–Ω–∞" />
          <button type="submit">–†–∞–∑–±–∞–Ω–∏—Ç—å</button>
        </form>

        <h3>üìã –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</h3>
        <ul>
          {% for b in banned %}
            <li>{{ b }}</li>
          {% endfor %}
        </ul>

        <h2>üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>
        {% for s in settings %}
          <div class="entry"><strong>{{ s.nick }}</strong>: {{ s.value }}</div>
        {% endfor %}
      {% endif %}

      <h2>üí¨ –í—Å–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h2>
      {% for c in comments %}
        <div class="entry">
          <strong>{{ c.nick }}</strong>: {{ c.text }}
          {% if role == "admin" %}
            <form method="POST" style="margin-top: 0.3em;">
              <input type="hidden" name="nickname" value="{{ role }}">
              <button name="delete_comment" value="{{ loop.index0 }}">‚ùå –£–¥–∞–ª–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
            </form>
          {% endif %}
        </div>
      {% endfor %}
    {% endif %}
  </div>
</body>
</html>
